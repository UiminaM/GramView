{% extends "account_base.html" %}
{% block title %}Каналы{% endblock %}

{% block content %}
<h2>Список каналов</h2>

<form method="get">
    <input type="text" name="q" value="{{ query }}" placeholder="Поиск по названию...">
    <button type="submit">Поиск</button>

    {% if is_advanced %}
        <label>
            <input type="checkbox" name="my" {% if only_my %}checked{% endif %} onchange="this.form.submit()">
            Мои каналы
        </label>
    {% endif %}


    <button type="button" onclick="location.href='{% url 'add_channel' %}'">+</button>
</form>

<ul>
    {% for channel in channels %}
        <li style="margin-bottom: 15px;">
            <a href="{% url 'channel_detail' channel.id %}" style="text-decoration: none; color: inherit;">
                {% if channel.photo_url %}
                    <img src="{{ channel.photo_url }}" width="40" height="40" style="border-radius: 50%;">
                {% endif %}
                <strong>{{ channel.name }}</strong> (@{{ channel.username }})
            </a>
            <form method="post" action="{% url 'delete_channel' channel.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit">Удалить</button>
            </form>
        </li>
    {% empty %}
        <p>Каналы не найдены.</p>
    {% endfor %}
</ul>
{% endblock %}
